<table class="exhibitions-table">
  <thead>
    @if(sortBy | async; as sortBy) {
      <tr>
        <th [ngClass]="{active: sortBy === 'id'}" (click)="updateSort('id')">Exhibition ID</th>
        <th [ngClass]="{active: sortBy === 'title'}" (click)="updateSort('title')">Title</th>
        <th [ngClass]="{active: sortBy === 'aic_start_at'}" (click)="updateSort('aic_start_at')">Start Date</th>
        <th [ngClass]="{active: sortBy === 'aic_end_at'}" (click)="updateSort('aic_end_at')">End Date</th>
        <th [ngClass]="{active: sortBy === 'status'}" (click)="updateSort('status')">Status</th>
      </tr>
    }

  </thead>
  <tbody>
    @for (exhibition of exhibitions | async; track exhibition.id) {
      <tr (click)="onExhibitionClick(exhibition.id)">
        <td>{{ exhibition.id }}</td>
        <td>{{ exhibition.title }}</td>
        <td>
          @if (exhibition.aic_start_at) {
            {{ exhibition.aic_start_at| date: 'shortDate' }}
          } @else {
            <span class="no-date">n/a</span>
          }
        </td>
        <td>
          @if (exhibition.aic_end_at) {
            {{ exhibition.aic_end_at | date: 'shortDate' }}
          } @else {
            <span class="no-date">n/a</span>
          }
        </td>
        <td>{{ exhibition.status }}</td>
      </tr>
    }
    @if (isLoading | async) {
      <app-exhibitions-table-skeleton></app-exhibitions-table-skeleton>
    }
  </tbody>
</table>
<button class="load-more" (click)="loadMoreExhibitions()" [disabled]="isLoading | async">{{ (isLoading | async) ? 'Loading' : 'Load more' }}</button>
